!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.jsondiffpatch=t()}}(function(){return function t(e,r,n){function i(f,a){if(!r[f]){if(!e[f]){var h="function"==typeof require&&require;if(!a&&h)return h(f,!0);if(s)return s(f,!0);throw new Error("Cannot find module '"+f+"'")}var o=r[f]={exports:{}};e[f][0].call(o.exports,function(t){var r=e[f][1][t];return i(r?r:t)},o,o.exports,t,e,r,n)}return r[f].exports}for(var s="function"==typeof require&&require,f=0;f<n.length;f++)i(n[f]);return i}({1:[function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var e=-1,r=1,n=0;t.Diff,t.prototype.diff_main=function(t,e,r,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var s=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[n,t]]:[];"undefined"==typeof r&&(r=!0);var f=r,a=this.diff_commonPrefix(t,e),h=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var o=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var l=this.diff_compute_(t,e,f,s);return h&&l.unshift([n,h]),o&&l.push([n,o]),this.diff_cleanupMerge(l),l},t.prototype.diff_compute_=function(t,i,s,f){var a;if(!t)return[[r,i]];if(!i)return[[e,t]];var h=t.length>i.length?t:i,o=t.length>i.length?i:t,l=h.indexOf(o);if(-1!=l)return a=[[r,h.substring(0,l)],[n,o],[r,h.substring(l+o.length)]],t.length>i.length&&(a[0][0]=a[2][0]=e),a;if(1==o.length)return[[e,t],[r,i]];h=o=null;var c=this.diff_halfMatch_(t,i);if(c){var u=c[0],p=c[1],d=c[2],g=c[3],v=c[4],_=this.diff_main(u,d,s,f),y=this.diff_main(p,g,s,f);return _.concat([[n,v]],y)}return s&&t.length>100&&i.length>100?this.diff_lineMode_(t,i,f):this.diff_bisect_(t,i,f)},t.prototype.diff_lineMode_=function(t,i,s){var f=this.diff_linesToChars_(t,i);t=f[0],i=f[1];var a=f[2],h=this.diff_bisect_(t,i,s);this.diff_charsToLines_(h,a),this.diff_cleanupSemantic(h),h.push([n,""]);for(var o=0,l=0,c=0,u="",p="";o<h.length;){switch(h[o][0]){case r:c++,p+=h[o][1];break;case e:l++,u+=h[o][1];break;case n:if(l>=1&&c>=1){var f=this.diff_main(u,p,!1,s);h.splice(o-l-c,l+c),o=o-l-c;for(var d=f.length-1;d>=0;d--)h.splice(o,0,f[d]);o+=f.length}c=0,l=0,u="",p=""}o++}return h.pop(),h},t.prototype.diff_bisect_=function(t,n,i){for(var s=t.length,f=n.length,a=Math.ceil((s+f)/2),h=a,o=2*a,l=new Array(o),c=new Array(o),u=0;o>u;u++)l[u]=-1,c[u]=-1;l[h+1]=0,c[h+1]=0;for(var p=s-f,d=p%2!=0,g=0,v=0,_=0,y=0,x=0;a>x&&!((new Date).getTime()>i);x++){for(var m=-x+g;x-v>=m;m+=2){var b,w=h+m;b=m==-x||m!=x&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1;for(var M=b-m;s>b&&f>M&&t.charAt(b)==n.charAt(M);)b++,M++;if(l[w]=b,b>s)v+=2;else if(M>f)g+=2;else if(d){var C=h+p-m;if(C>=0&&o>C&&-1!=c[C]){var A=s-c[C];if(b>=A)return this.diff_bisectSplit_(t,n,b,M,i)}}}for(var R=-x+_;x-y>=R;R+=2){var A,C=h+R;A=R==-x||R!=x&&c[C-1]<c[C+1]?c[C+1]:c[C-1]+1;for(var P=A-R;s>A&&f>P&&t.charAt(s-A-1)==n.charAt(f-P-1);)A++,P++;if(c[C]=A,A>s)y+=2;else if(P>f)_+=2;else if(!d){var w=h+p-R;if(w>=0&&o>w&&-1!=l[w]){var b=l[w],M=h+b-w;if(A=s-A,b>=A)return this.diff_bisectSplit_(t,n,b,M,i)}}}}return[[e,t],[r,n]]},t.prototype.diff_bisectSplit_=function(t,e,r,n,i){var s=t.substring(0,r),f=e.substring(0,n),a=t.substring(r),h=e.substring(n),o=this.diff_main(s,f,!1,i),l=this.diff_main(a,h,!1,i);return o.concat(l)},t.prototype.diff_linesToChars_=function(t,e){function r(t){for(var e="",r=0,s=-1,f=n.length;s<t.length-1;){s=t.indexOf("\n",r),-1==s&&(s=t.length-1);var a=t.substring(r,s+1);r=s+1,(i.hasOwnProperty?i.hasOwnProperty(a):void 0!==i[a])?e+=String.fromCharCode(i[a]):(e+=String.fromCharCode(f),i[a]=f,n[f++]=a)}return e}var n=[],i={};n[0]="";var s=r(t),f=r(e);return[s,f,n]},t.prototype.diff_charsToLines_=function(t,e){for(var r=0;r<t.length;r++){for(var n=t[r][1],i=[],s=0;s<n.length;s++)i[s]=e[n.charCodeAt(s)];t[r][1]=i.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,s=0;i>r;)t.substring(s,i)==e.substring(s,i)?(r=i,s=r):n=i,i=Math.floor((n-r)/2+r);return i},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,s=0;i>r;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(r=i,s=r):n=i,i=Math.floor((n-r)/2+r);return i},t.prototype.diff_commonOverlap_=function(t,e){var r=t.length,n=e.length;if(0==r||0==n)return 0;r>n?t=t.substring(r-n):n>r&&(e=e.substring(0,r));var i=Math.min(r,n);if(t==e)return i;for(var s=0,f=1;;){var a=t.substring(i-f),h=e.indexOf(a);if(-1==h)return s;f+=h,(0==h||t.substring(i-f)==e.substring(0,f))&&(s=f,f++)}},t.prototype.diff_halfMatch_=function(t,e){function r(t,e,r){for(var n,i,s,a,h=t.substring(r,r+Math.floor(t.length/4)),o=-1,l="";-1!=(o=e.indexOf(h,o+1));){var c=f.diff_commonPrefix(t.substring(r),e.substring(o)),u=f.diff_commonSuffix(t.substring(0,r),e.substring(0,o));l.length<u+c&&(l=e.substring(o-u,o)+e.substring(o,o+c),n=t.substring(0,r-u),i=t.substring(r+c),s=e.substring(0,o-u),a=e.substring(o+c))}return 2*l.length>=t.length?[n,i,s,a,l]:null}if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var s,f=this,a=r(n,i,Math.ceil(n.length/4)),h=r(n,i,Math.ceil(n.length/2));if(!a&&!h)return null;s=h?a&&a[4].length>h[4].length?a:h:a;var o,l,c,u;t.length>e.length?(o=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],o=s[2],l=s[3]);var p=s[4];return[o,l,c,u,p]},t.prototype.diff_cleanupSemantic=function(t){for(var i=!1,s=[],f=0,a=null,h=0,o=0,l=0,c=0,u=0;h<t.length;)t[h][0]==n?(s[f++]=h,o=c,l=u,c=0,u=0,a=t[h][1]):(t[h][0]==r?c+=t[h][1].length:u+=t[h][1].length,null!==a&&a.length<=Math.max(o,l)&&a.length<=Math.max(c,u)&&(t.splice(s[f-1],0,[e,a]),t[s[f-1]+1][0]=r,f--,f--,h=f>0?s[f-1]:-1,o=0,l=0,c=0,u=0,a=null,i=!0)),h++;for(i&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),h=1;h<t.length;){if(t[h-1][0]==e&&t[h][0]==r){var p=t[h-1][1],d=t[h][1],g=this.diff_commonOverlap_(p,d);(g>=p.length/2||g>=d.length/2)&&(t.splice(h,0,[n,d.substring(0,g)]),t[h-1][1]=p.substring(0,p.length-g),t[h+1][1]=d.substring(g),h++),h++}h++}},t.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 5;var n=0;return(t.charAt(t.length-1).match(r)||e.charAt(0).match(r))&&(n++,(t.charAt(t.length-1).match(i)||e.charAt(0).match(i))&&(n++,(t.charAt(t.length-1).match(s)||e.charAt(0).match(s))&&(n++,(t.match(f)||e.match(a))&&n++))),n}for(var r=/[^a-zA-Z0-9]/,i=/\s/,s=/[\r\n]/,f=/\n\r?\n$/,a=/^\r?\n\r?\n/,h=1;h<t.length-1;){if(t[h-1][0]==n&&t[h+1][0]==n){var o=t[h-1][1],l=t[h][1],c=t[h+1][1],u=this.diff_commonSuffix(o,l);if(u){var p=l.substring(l.length-u);o=o.substring(0,o.length-u),l=p+l.substring(0,l.length-u),c=p+c}for(var d=o,g=l,v=c,_=e(o,l)+e(l,c);l.charAt(0)===c.charAt(0);){o+=l.charAt(0),l=l.substring(1)+c.charAt(0),c=c.substring(1);var y=e(o,l)+e(l,c);y>=_&&(_=y,d=o,g=l,v=c)}t[h-1][1]!=d&&(d?t[h-1][1]=d:(t.splice(h-1,1),h--),t[h][1]=g,v?t[h+1][1]=v:(t.splice(h+1,1),h--))}h++}},t.prototype.diff_cleanupEfficiency=function(t){for(var i=!1,s=[],f=0,a="",h=0,o=!1,l=!1,c=!1,u=!1;h<t.length;)t[h][0]==n?(t[h][1].length<this.Diff_EditCost&&(c||u)?(s[f++]=h,o=c,l=u,a=t[h][1]):(f=0,a=""),c=u=!1):(t[h][0]==e?u=!0:c=!0,a&&(o&&l&&c&&u||a.length<this.Diff_EditCost/2&&o+l+c+u==3)&&(t.splice(s[f-1],0,[e,a]),t[s[f-1]+1][0]=r,f--,a="",o&&l?(c=u=!0,f=0):(f--,h=f>0?s[f-1]:-1,c=u=!1),i=!0)),h++;i&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([n,""]);for(var i,s=0,f=0,a=0,h="",o="";s<t.length;)switch(t[s][0]){case r:a++,o+=t[s][1],s++;break;case e:f++,h+=t[s][1],s++;break;case n:f+a>1?(0!==f&&0!==a&&(i=this.diff_commonPrefix(o,h),0!==i&&(s-f-a>0&&t[s-f-a-1][0]==n?t[s-f-a-1][1]+=o.substring(0,i):(t.splice(0,0,[n,o.substring(0,i)]),s++),o=o.substring(i),h=h.substring(i)),i=this.diff_commonSuffix(o,h),0!==i&&(t[s][1]=o.substring(o.length-i)+t[s][1],o=o.substring(0,o.length-i),h=h.substring(0,h.length-i))),0===f?t.splice(s-f-a,f+a,[r,o]):0===a?t.splice(s-f-a,f+a,[e,h]):t.splice(s-f-a,f+a,[e,h],[r,o]),s=s-f-a+(f?1:0)+(a?1:0)+1):0!==s&&t[s-1][0]==n?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,a=0,f=0,h="",o=""}""===t[t.length-1][1]&&t.pop();var l=!1;for(s=1;s<t.length-1;)t[s-1][0]==n&&t[s+1][0]==n&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)==t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),l=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),l=!0)),s++;l&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,n){var i,s=0,f=0,a=0,h=0;for(i=0;i<t.length&&(t[i][0]!==r&&(s+=t[i][1].length),t[i][0]!==e&&(f+=t[i][1].length),!(s>n));i++)a=s,h=f;return t.length!=i&&t[i][0]===e?h:h+(n-a)},t.prototype.diff_prettyHtml=function(t){for(var i=[],s=0,f=/&/g,a=/</g,h=/>/g,o=/\n/g,l=0;l<t.length;l++){var c=t[l][0],u=t[l][1],p=u.replace(f,"&amp;").replace(a,"&lt;").replace(h,"&gt;").replace(o,"&para;<br>");switch(c){case r:i[l]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case e:i[l]='<del style="background:#ffe6e6;">'+p+"</del>";break;case n:i[l]="<span>"+p+"</span>"}c!==e&&(s+=u.length)}return i.join("")},t.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==r&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var r=[],n=0;n<t.length;n++)t[n][0]!==e&&(r[n]=t[n][1]);return r.join("")},t.prototype.diff_levenshtein=function(t){for(var i=0,s=0,f=0,a=0;a<t.length;a++){var h=t[a][0],o=t[a][1];switch(h){case r:s+=o.length;break;case e:f+=o.length;break;case n:i+=Math.max(s,f),s=0,f=0}}return i+=Math.max(s,f)},t.prototype.diff_toDelta=function(t){for(var i=[],s=0;s<t.length;s++)switch(t[s][0]){case r:i[s]="+"+encodeURI(t[s][1]);break;case e:i[s]="-"+t[s][1].length;break;case n:i[s]="="+t[s][1].length}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,i){for(var s=[],f=0,a=0,h=i.split(/\t/g),o=0;o<h.length;o++){var l=h[o].substring(1);switch(h[o].charAt(0)){case"+":try{s[f++]=[r,decodeURI(l)]}catch(c){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var u=parseInt(l,10);if(isNaN(u)||0>u)throw new Error("Invalid number in diff_fromDelta: "+l);var p=t.substring(a,a+=u);s[f++]="="==h[o].charAt(0)?[n,p]:[e,p];break;default:if(h[o])throw new Error("Invalid diff operation in diff_fromDelta: "+h[o])}}if(a!=t.length)throw new Error("Delta length ("+a+") does not equal source text length ("+t.length+").");return s},t.prototype.match_main=function(t,e,r){if(null==t||null==e||null==r)throw new Error("Null input. (match_main)");return r=Math.max(0,Math.min(r,t.length)),t==e?0:t.length?t.substring(r,r+e.length)==e?r:this.match_bitap_(t,e,r):-1},t.prototype.match_bitap_=function(t,e,r){function n(t,n){var i=t/e.length,f=Math.abs(r-n);return s.Match_Distance?i+f/s.Match_Distance:f?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),s=this,f=this.Match_Threshold,a=t.indexOf(e,r);-1!=a&&(f=Math.min(n(0,a),f),a=t.lastIndexOf(e,r+e.length),-1!=a&&(f=Math.min(n(0,a),f)));var h=1<<e.length-1;a=-1;for(var o,l,c,u=e.length+t.length,p=0;p<e.length;p++){for(o=0,l=u;l>o;)n(p,r+l)<=f?o=l:u=l,l=Math.floor((u-o)/2+o);u=l;var d=Math.max(1,r-l+1),g=Math.min(r+l,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<p)-1;for(var _=g;_>=d;_--){var y=i[t.charAt(_-1)];if(v[_]=0===p?(v[_+1]<<1|1)&y:(v[_+1]<<1|1)&y|((c[_+1]|c[_])<<1|1)|c[_+1],v[_]&h){var x=n(p,_-1);if(f>=x){if(f=x,a=_-1,!(a>r))break;d=Math.max(1,2*r-a)}}}if(n(p+1,r)>f)break;c=v}return a},t.prototype.match_alphabet_=function(t){for(var e={},r=0;r<t.length;r++)e[t.charAt(r)]=0;for(var r=0;r<t.length;r++)e[t.charAt(r)]|=1<<t.length-r-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var r=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(r)!=e.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var s=e.substring(t.start2-i,t.start2);s&&t.diffs.unshift([n,s]);var f=e.substring(t.start2+t.length1,t.start2+t.length1+i);f&&t.diffs.push([n,f]),t.start1-=s.length,t.start2-=s.length,t.length1+=s.length+f.length,t.length2+=s.length+f.length}},t.prototype.patch_make=function(i,s,f){var a,h;if("string"==typeof i&&"string"==typeof s&&"undefined"==typeof f)a=i,h=this.diff_main(a,s,!0),h.length>2&&(this.diff_cleanupSemantic(h),this.diff_cleanupEfficiency(h));else if(i&&"object"==typeof i&&"undefined"==typeof s&&"undefined"==typeof f)h=i,a=this.diff_text1(h);else if("string"==typeof i&&s&&"object"==typeof s&&"undefined"==typeof f)a=i,h=s;else{if("string"!=typeof i||"string"!=typeof s||!f||"object"!=typeof f)throw new Error("Unknown call format to patch_make.");a=i,h=f}if(0===h.length)return[];for(var o=[],l=new t.patch_obj,c=0,u=0,p=0,d=a,g=a,v=0;v<h.length;v++){var _=h[v][0],y=h[v][1];switch(c||_===n||(l.start1=u,l.start2=p),_){case r:l.diffs[c++]=h[v],l.length2+=y.length,g=g.substring(0,p)+y+g.substring(p);break;case e:l.length1+=y.length,l.diffs[c++]=h[v],g=g.substring(0,p)+g.substring(p+y.length);break;case n:y.length<=2*this.Patch_Margin&&c&&h.length!=v+1?(l.diffs[c++]=h[v],l.length1+=y.length,l.length2+=y.length):y.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,d),o.push(l),l=new t.patch_obj,c=0,d=g,u=p)}_!==r&&(u+=y.length),_!==e&&(p+=y.length)}return c&&(this.patch_addContext_(l,d),o.push(l)),o},t.prototype.patch_deepCopy=function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n],s=new t.patch_obj;s.diffs=[];for(var f=0;f<i.diffs.length;f++)s.diffs[f]=i.diffs[f].slice();s.start1=i.start1,s.start2=i.start2,s.length1=i.length1,s.length2=i.length2,r[n]=s}return r},t.prototype.patch_apply=function(t,i){if(0==t.length)return[i,[]];t=this.patch_deepCopy(t);var s=this.patch_addPadding(t);i=s+i+s,this.patch_splitMax(t);for(var f=0,a=[],h=0;h<t.length;h++){var o,l=t[h].start2+f,c=this.diff_text1(t[h].diffs),u=-1;if(c.length>this.Match_MaxBits?(o=this.match_main(i,c.substring(0,this.Match_MaxBits),l),-1!=o&&(u=this.match_main(i,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits),(-1==u||o>=u)&&(o=-1))):o=this.match_main(i,c,l),-1==o)a[h]=!1,f-=t[h].length2-t[h].length1;else{a[h]=!0,f=o-l;var p;if(p=-1==u?i.substring(o,o+c.length):i.substring(o,u+this.Match_MaxBits),c==p)i=i.substring(0,o)+this.diff_text2(t[h].diffs)+i.substring(o+c.length);else{var d=this.diff_main(c,p,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(d)/c.length>this.Patch_DeleteThreshold)a[h]=!1;else{this.diff_cleanupSemanticLossless(d);for(var g,v=0,_=0;_<t[h].diffs.length;_++){var y=t[h].diffs[_];y[0]!==n&&(g=this.diff_xIndex(d,v)),y[0]===r?i=i.substring(0,o+g)+y[1]+i.substring(o+g):y[0]===e&&(i=i.substring(0,o+g)+i.substring(o+this.diff_xIndex(d,v+y[1].length))),y[0]!==e&&(v+=y[1].length)}}}}}return i=i.substring(s.length,i.length-s.length),[i,a]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,r="",i=1;e>=i;i++)r+=String.fromCharCode(i);for(var i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var s=t[0],f=s.diffs;if(0==f.length||f[0][0]!=n)f.unshift([n,r]),s.start1-=e,s.start2-=e,s.length1+=e,s.length2+=e;else if(e>f[0][1].length){var a=e-f[0][1].length;f[0][1]=r.substring(f[0][1].length)+f[0][1],s.start1-=a,s.start2-=a,s.length1+=a,s.length2+=a}if(s=t[t.length-1],f=s.diffs,0==f.length||f[f.length-1][0]!=n)f.push([n,r]),s.length1+=e,s.length2+=e;else if(e>f[f.length-1][1].length){var a=e-f[f.length-1][1].length;f[f.length-1][1]+=r.substring(0,a),s.length1+=a,s.length2+=a}return r},t.prototype.patch_splitMax=function(i){for(var s=this.Match_MaxBits,f=0;f<i.length;f++)if(i[f].length1>s){var a=i[f];i.splice(f--,1);for(var h=a.start1,o=a.start2,l="";0!==a.diffs.length;){var c=new t.patch_obj,u=!0;for(c.start1=h-l.length,c.start2=o-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push([n,l]));0!==a.diffs.length&&c.length1<s-this.Patch_Margin;){var p=a.diffs[0][0],d=a.diffs[0][1];p===r?(c.length2+=d.length,o+=d.length,c.diffs.push(a.diffs.shift()),u=!1):p===e&&1==c.diffs.length&&c.diffs[0][0]==n&&d.length>2*s?(c.length1+=d.length,h+=d.length,u=!1,c.diffs.push([p,d]),a.diffs.shift()):(d=d.substring(0,s-c.length1-this.Patch_Margin),c.length1+=d.length,h+=d.length,p===n?(c.length2+=d.length,o+=d.length):u=!1,c.diffs.push([p,d]),d==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(d.length))}l=this.diff_text2(c.diffs),l=l.substring(l.length-this.Patch_Margin);var g=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);""!==g&&(c.length1+=g.length,c.length2+=g.length,0!==c.diffs.length&&c.diffs[c.diffs.length-1][0]===n?c.diffs[c.diffs.length-1][1]+=g:c.diffs.push([n,g])),u||i.splice(++f,0,c)}}},t.prototype.patch_toText=function(t){for(var e=[],r=0;r<t.length;r++)e[r]=t[r];return e.join("")},t.prototype.patch_fromText=function(i){var s=[];if(!i)return s;for(var f=i.split("\n"),a=0,h=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<f.length;){var o=f[a].match(h);if(!o)throw new Error("Invalid patch string: "+f[a]);var l=new t.patch_obj;for(s.push(l),l.start1=parseInt(o[1],10),""===o[2]?(l.start1--,l.length1=1):"0"==o[2]?l.length1=0:(l.start1--,l.length1=parseInt(o[2],10)),l.start2=parseInt(o[3],10),""===o[4]?(l.start2--,l.length2=1):"0"==o[4]?l.length2=0:(l.start2--,l.length2=parseInt(o[4],10)),a++;a<f.length;){var c=f[a].charAt(0);try{var u=decodeURI(f[a].substring(1))}catch(p){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push([e,u]);else if("+"==c)l.diffs.push([r,u]);else if(" "==c)l.diffs.push([n,u]);else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}a++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var t,i;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,i=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var s,f=["@@ -"+t+" +"+i+" @@\n"],a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case r:s="+";break;case e:s="-";break;case n:s=" "}f[a+1]=s+encodeURI(this.diffs[a][1])+"\n"}return f.join("").replace(/%20/g," ")},this.diff_match_patch=t,this.DIFF_DELETE=e,this.DIFF_INSERT=r,this.DIFF_EQUAL=n},{}],2:[function(t,e){function r(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],3:[function(t,e,r){var n=t("../pipe").Pipe,i=function(){};i.prototype.setResult=function(t){return this.result=t,this.hasResult=!0,this},i.prototype.exit=function(){return this.exiting=!0,this},i.prototype.switchTo=function(t,e){return"string"==typeof t||t instanceof n?this.nextPipe=t:(this.next=t,e&&(this.nextPipe=e)),this},i.prototype.push=function(t,e){return t.parent=this,"undefined"!=typeof e&&(t.childName=e),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this},r.Context=i},{"../pipe":16}],4:[function(t,e,r){var n=t("./context").Context,i=function(t,e){this.left=t,this.right=e,this.pipe="diff"};i.prototype=new n,r.DiffContext=i},{"./context":3}],5:[function(t,e,r){var n=t("./context").Context,i=function(t,e){this.left=t,this.delta=e,this.pipe="patch"};i.prototype=new n,r.PatchContext=i},{"./context":3}],6:[function(t,e,r){var n=t("./context").Context,i=function(t){this.delta=t,this.pipe="reverse"};i.prototype=new n,r.ReverseContext=i},{"./context":3}],7:[function(t,e){e.exports=function(t,e){var r;return"string"==typeof e&&(r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+\-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],+(r[7]||0))):e}},{}],8:[function(t,e,r){var n=t("./processor").Processor,i=t("./pipe").Pipe,s=t("./contexts/diff").DiffContext,f=t("./contexts/patch").PatchContext,a=t("./contexts/reverse").ReverseContext,h=t("./filters/trivial"),o=t("./filters/nested"),l=t("./filters/arrays"),c=t("./filters/dates"),u=t("./filters/texts"),p=function(t){this.processor=new n(t),this.processor.pipe(new i("diff").append(o.collectChildrenDiffFilter,h.diffFilter,c.diffFilter,u.diffFilter,o.objectsDiffFilter,l.diffFilter).shouldHaveResult()),this.processor.pipe(new i("patch").append(o.collectChildrenPatchFilter,l.collectChildrenPatchFilter,h.patchFilter,u.patchFilter,o.patchFilter,l.patchFilter).shouldHaveResult()),this.processor.pipe(new i("reverse").append(o.collectChildrenReverseFilter,l.collectChildrenReverseFilter,h.reverseFilter,u.reverseFilter,o.reverseFilter,l.reverseFilter).shouldHaveResult())};p.prototype.options=function(){return this.processor.options.apply(this.processor,arguments)},p.prototype.diff=function(t,e){return this.processor.process(new s(t,e))},p.prototype.patch=function(t,e){return this.processor.process(new f(t,e))},p.prototype.reverse=function(t){return this.processor.process(new a(t))},p.prototype.unpatch=function(t,e){return this.patch(t,this.reverse(e))},r.DiffPatcher=p},{"./contexts/diff":4,"./contexts/patch":5,"./contexts/reverse":6,"./filters/arrays":10,"./filters/dates":11,"./filters/nested":13,"./filters/texts":14,"./filters/trivial":15,"./pipe":16,"./processor":17}],9:[function(t,e,r){(function(e){var n=t("./diffpatcher").DiffPatcher;r.DiffPatcher=n,r.create=function(t){return new n(t)},r.dateReviver=t("./date-reviver");var i;r.diff=function(){return i||(i=new n),i.diff.apply(i,arguments)},r.patch=function(){return i||(i=new n),i.patch.apply(i,arguments)},r.unpatch=function(){return i||(i=new n),i.unpatch.apply(i,arguments)},r.reverse=function(){return i||(i=new n),i.reverse.apply(i,arguments)};var s="undefined"!=typeof e&&"string"==typeof e.execPath;if(s){var f=t("./formatters/index");r.formatters=f,r.console=f.console}else r.homepage="https://github.com/benjamine/jsondiffpatch",r.version="0.1.8"}).call(this,t("1YiZ5S"))},{"./date-reviver":7,"./diffpatcher":8,"1YiZ5S":2}],10:[function(t,e,r){var n=t("../contexts/diff").DiffContext,i=t("../contexts/patch").PatchContext,s=t("../contexts/reverse").ReverseContext,f=t("./lcs"),a=3,h="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},o="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var r=t.length,n=0;r>n;n++)if(t[n]===e)return n;return-1},l=function(t){if(t.leftIsArray){for(var e,r,i,s,h=t.options&&t.options.objectHash,l=function(t,e,r,n,i){var s=t[r],f=e[n];if(s===f)return!0;if("object"!=typeof s||"object"!=typeof f)return!1;if(!h)return!1;var a,o;return"number"==typeof r?(i.hashCache1=i.hashCache1||[],a=i.hashCache1[r],"undefined"==typeof a&&(i.hashCache1[r]=a=h(s,r))):a=h(s),"undefined"==typeof a?!1:("number"==typeof n?(i.hashCache2=i.hashCache2||[],o=i.hashCache2[n],"undefined"==typeof o&&(i.hashCache2[n]=o=h(f,n))):o=h(f),"undefined"==typeof o?!1:a===o)},c={},u=0,p=0,d=t.left,g=t.right,v=d.length,_=g.length;v>u&&_>u&&l(d,g,u,u,c);)e=u,s=new n(t.left[e],t.right[e]),t.push(s,e),u++;for(;v>p+u&&_>p+u&&l(d,g,v-1-p,_-1-p,c);)r=v-1-p,i=_-1-p,s=new n(t.left[r],t.right[i]),t.push(s,i),p++;var y;if(u+p===v){if(v===_)return void t.setResult(void 0).exit();for(y=y||{_t:"a"},e=u;_-p>e;e++)y[e]=[g[e]];return void t.setResult(y).exit()}if(u+p===_){for(y=y||{_t:"a"},e=u;v-p>e;e++)y["_"+e]=[d[e],0,0];return void t.setResult(y).exit()}c={};var x=d.slice(u,v-p),m=g.slice(u,_-p),b=f.get(x,m,l,c),w=[];for(y=y||{_t:"a"},e=u;v-p>e;e++)o(b.indices1,e-u)<0&&(y["_"+e]=[d[e],0,0],w.push(e));var M=!0;t.options&&t.options.arrays&&t.options.arrays.detectMove===!1&&(M=!1);var C=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(C=!0);var A=w.length;for(e=u;_-p>e;e++){var R=o(b.indices2,e-u);if(0>R){var P=!1;if(M&&A>0)for(var D=0;A>D;D++)if(r=w[D],l(x,m,r-u,e-u,c)){y["_"+r].splice(1,2,e,a),C||(y["_"+r][0]=""),i=e,s=new n(t.left[r],t.right[i]),t.push(s,i),w.splice(D,1),P=!0;break}P||(y[e]=[g[e]])}else r=b.indices1[R]+u,i=b.indices2[R]+u,s=new n(t.left[r],t.right[i]),t.push(s,i)}t.setResult(y).exit()}};l.filterName="arrays";var c={numerically:function(t,e){return t-e},numericallyBy:function(t){return function(e,r){return e[t]-r[t]}}},u=function(t){if(t.nested&&"a"===t.delta._t){var e,r,n=t.delta,s=t.left,f=[],h=[],o=[];for(e in n)if("_t"!==e)if("_"===e[0]){if(0!==n[e][2]&&n[e][2]!==a)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+n[e][2]);f.push(parseInt(e.slice(1),10))}else 1===n[e].length?h.push({index:parseInt(e,10),value:n[e][0]}):o.push({index:parseInt(e,10),delta:n[e]});for(f=f.sort(c.numerically),e=f.length-1;e>=0;e--){r=f[e];var l=n["_"+r],u=s.splice(r,1)[0];l[2]===a&&h.push({index:l[1],value:u})}h=h.sort(c.numericallyBy("index"));var p=h.length;for(e=0;p>e;e++){var d=h[e];s.splice(d.index,0,d.value)}var g,v=o.length;if(v>0)for(e=0;v>e;e++){var _=o[e];g=new i(t.left[_.index],_.delta),t.push(g,_.index)}return t.children?void t.exit():void t.setResult(t.left).exit()}};u.filterName="arrays";var p=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e,r=t.children.length,n=0;r>n;n++)e=t.children[n],t.left[e.childName]=e.result;t.setResult(t.left).exit()}};p.filterName="arraysCollectChildren";var d=function(t){if(!t.nested)return void(t.delta[2]===a&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),a]).exit()));if("a"===t.delta._t){var e,r;for(e in t.delta)"_t"!==e&&(r=new s(t.delta[e]),t.push(r,e));t.exit()}};d.filterName="arrays";var g=function(t,e,r){var n=e;if("string"==typeof e&&"_"===e[0])n=parseInt(e.substr(1),10);else{var i="_"+e;if(h(r)&&0===r[2])n=i;else for(var s in t){var f=t[s];h(f)&&f[2]===a&&f[1].toString()===e&&(n=s.substr(1))}}return n},v=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e,r=t.children.length,n={_t:"a"},i=0;r>i;i++){e=t.children[i];var s=e.newName;"undefined"==typeof s&&(s=g(t.delta,e.childName,e.result)),n[s]!==e.result&&(n[s]=e.result)}t.setResult(n).exit()}};v.filterName="arraysCollectChildren",r.diffFilter=l,r.patchFilter=u,r.collectChildrenPatchFilter=p,r.reverseFilter=d,r.collectChildrenReverseFilter=v},{"../contexts/diff":4,"../contexts/patch":5,"../contexts/reverse":6,"./lcs":12}],11:[function(t,e,r){var n=function(t){t.left instanceof Date?(t.setResult(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?[t.left,t.right]:void 0:[t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};n.filterName="dates",r.diffFilter=n},{}],12:[function(t,e,r){var n=function(t,e,r,n){return t[r]===e[n]},i=function(t,e,r,n){var i,s,f=t.length,a=e.length,h=[f+1];for(i=0;f+1>i;i++)for(h[i]=[a+1],s=0;a+1>s;s++)h[i][s]=0;for(h.match=r,i=1;f+1>i;i++)for(s=1;a+1>s;s++)h[i][s]=r(t,e,i-1,s-1,n)?h[i-1][s-1]+1:Math.max(h[i-1][s],h[i][s-1]);return h},s=function(t,e,r,n,i,f){if(0===n||0===i)return{sequence:[],indices1:[],indices2:[]};if(t.match(e,r,n-1,i-1,f)){var a=s(t,e,r,n-1,i-1,f);return a.sequence.push(e[n-1]),a.indices1.push(n-1),a.indices2.push(i-1),a}return t[n][i-1]>t[n-1][i]?s(t,e,r,n,i-1,f):s(t,e,r,n-1,i,f)},f=function(t,e,r,f){f=f||{};var a=i(t,e,r||n,f),h=s(a,t,e,t.length,e.length,f);return"string"==typeof t&&"string"==typeof e&&(h.sequence=h.sequence.join("")),h};r.get=f},{}],13:[function(t,e,r){var n=t("../contexts/diff").DiffContext,i=t("../contexts/patch").PatchContext,s=t("../contexts/reverse").ReverseContext,f=function(t){if(t&&t.children){for(var e,r=t.children.length,n=t.result,i=0;r>i;i++)e=t.children[i],"undefined"!=typeof e.result&&(n=n||{},n[e.childName]=e.result);n&&t.leftIsArray&&(n._t="a"),t.setResult(n).exit()}};f.filterName="collectChildren";var a=function(t){if(!t.leftIsArray&&"object"===t.leftType){var e,r;for(e in t.left)r=new n(t.left[e],t.right[e]),t.push(r,e);for(e in t.right)"undefined"==typeof t.left[e]&&(r=new n(void 0,t.right[e]),t.push(r,e));return t.children&&0!==t.children.length?void t.exit():void t.setResult(void 0).exit()}};a.filterName="objects";var h=function(t){if(t.nested&&!t.delta._t){var e,r;for(e in t.delta)r=new i(t.left[e],t.delta[e]),t.push(r,e);t.exit()}};h.filterName="objects";var o=function(t){if(t&&t.children&&!t.delta._t){for(var e,r=t.children.length,n=0;r>n;n++)e=t.children[n],t.left[e.childName]!==e.result&&(t.left[e.childName]=e.result);t.setResult(t.left).exit()}};o.filterName="collectChildren";var l=function(t){if(t.nested&&!t.delta._t){var e,r;for(e in t.delta)r=new s(t.delta[e]),t.push(r,e);t.exit()}};l.filterName="objects";var c=function(t){if(t&&t.children&&!t.delta._t){for(var e,r=t.children.length,n={},i=0;r>i;i++)e=t.children[i],n[e.childName]!==e.result&&(n[e.childName]=e.result);t.setResult(n).exit()}};c.filterName="collectChildren",r.collectChildrenDiffFilter=f,r.objectsDiffFilter=a,r.patchFilter=h,r.collectChildrenPatchFilter=o,r.reverseFilter=l,r.collectChildrenReverseFilter=c},{"../contexts/diff":4,"../contexts/patch":5,"../contexts/reverse":6}],14:[function(t,e,r){var n=2,i=60,s=null,f=function(){if(!s){var e;if("undefined"!=typeof diff_match_patch)e=new diff_match_patch;else if("function"==typeof t){var r=t("../../external/diff_match_patch_uncompressed");e=new r.diff_match_patch}if(!e){var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}s={diff:function(t,r){return e.patch_toText(e.patch_make(t,r))},patch:function(t,r){for(var n=e.patch_apply(e.patch_fromText(r),t),i=0;i<n[1].length;i++)if(!n[1][i]){var s=new Error("text patch failed");s.textPatchFailed=!0}return n[0]}}}return s},a=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||i;if(t.left.length<e||t.right.length<e)return void t.setResult([t.left,t.right]).exit();var r=f().diff;t.setResult([r(t.left,t.right),0,n]).exit()}};a.filterName="texts";var h=function(t){if(!t.nested&&t.delta[2]===n){var e=f().patch;t.setResult(e(t.left,t.delta[0])).exit()}};h.filterName="texts";var o=function(t){var e,r,n,i,s,f,a,h,o=null,l=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(n=t.split("\n"),e=0,r=n.length;r>e;e++){i=n[e];var c=i.slice(0,1);"@"===c?(o=l.exec(i),f=e,a=null,h=null,n[f]="@@ -"+o[3]+","+o[4]+" +"+o[1]+","+o[2]+" @@"):"+"===c?(a=e,n[e]="-"+n[e].slice(1),"+"===n[e-1].slice(0,1)&&(s=n[e],n[e]=n[e-1],n[e-1]=s)):"-"===c&&(h=e,n[e]="+"+n[e].slice(1))}return n.join("\n")},l=function(t){t.nested||t.delta[2]===n&&t.setResult([o(t.delta[0]),0,n]).exit()};l.filterName="texts",r.diffFilter=a,r.patchFilter=h,r.reverseFilter=l},{"../../external/diff_match_patch_uncompressed":1}],15:[function(t,e,r){var n="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},i=function(t){if(t.left===t.right)return void t.setResult(void 0).exit();
if("undefined"==typeof t.left){if("function"==typeof t.right)throw new Error("functions are not supported");return void t.setResult([t.right]).exit()}if("undefined"==typeof t.right)return void t.setResult([t.left,0,0]).exit();if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");return t.leftType=null===t.left?"null":typeof t.left,t.rightType=null===t.right?"null":typeof t.right,t.leftType!==t.rightType?void t.setResult([t.left,t.right]).exit():"boolean"===t.leftType||"number"===t.leftType?void t.setResult([t.left,t.right]).exit():("object"===t.leftType&&(t.leftIsArray=n(t.left)),"object"===t.rightType&&(t.rightIsArray=n(t.right)),t.leftIsArray!==t.rightIsArray?void t.setResult([t.left,t.right]).exit():void 0)};i.filterName="trivial";var s=function(t){return"undefined"==typeof t.delta?void t.setResult(t.left).exit():(t.nested=!n(t.delta),t.nested?void 0:1===t.delta.length?void t.setResult(t.delta[0]).exit():2===t.delta.length?void t.setResult(t.delta[1]).exit():3===t.delta.length&&0===t.delta[2]?void t.setResult(void 0).exit():void 0)};s.filterName="trivial";var f=function(t){return"undefined"==typeof t.delta?void t.setResult(t.delta).exit():(t.nested=!n(t.delta),t.nested?void 0:1===t.delta.length?void t.setResult([t.delta[0],0,0]).exit():2===t.delta.length?void t.setResult([t.delta[1],t.delta[0]]).exit():3===t.delta.length&&0===t.delta[2]?void t.setResult([t.delta[0]]).exit():void 0)};f.filterName="trivial",r.diffFilter=i,r.patchFilter=s,r.reverseFilter=f},{}],16:[function(t,e,r){var n=function(t){this.name=t,this.filters=[]};n.prototype.process=function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,r=this.filters.length,n=t,i=0;r>i;i++){var s=this.filters[i];if(e&&this.log("filter: "+s.filterName),s(n),"object"==typeof n&&n.exiting){n.exiting=!1;break}}!n.next&&this.resultCheck&&this.resultCheck(n)},n.prototype.log=function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)},n.prototype.append=function(){return this.filters.push.apply(this.filters,arguments),this},n.prototype.prepend=function(){return this.filters.unshift.apply(this.filters,arguments),this},n.prototype.indexOf=function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++){var r=this.filters[e];if(r.filterName===t)return e}throw new Error("filter not found: "+t)},n.prototype.list=function(){for(var t=[],e=0;e<this.filters.length;e++){var r=this.filters[e];t.push(r.filterName)}return t},n.prototype.after=function(t){var e=this.indexOf(t),r=Array.prototype.slice.call(arguments,1);if(!r.length)throw new Error("a filter is required");return r.unshift(e+1,0),Array.prototype.splice.apply(this.filters,r),this},n.prototype.before=function(t){var e=this.indexOf(t),r=Array.prototype.slice.call(arguments,1);if(!r.length)throw new Error("a filter is required");return r.unshift(e,0),Array.prototype.splice.apply(this.filters,r),this},n.prototype.clear=function(){return this.filters.length=0,this},n.prototype.shouldHaveResult=function(t){if(t===!1)return void(this.resultCheck=null);if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var r=new Error(e.name+" failed");throw r.noResult=!0,r}},this}},r.Pipe=n},{}],17:[function(t,e,r){var n=function(t){this.selfOptions=t,this.pipes={}};n.prototype.options=function(t){return t&&(this.selfOptions=t),this.selfOptions},n.prototype.pipe=function(t,e){if("string"==typeof t){if("undefined"==typeof e)return this.pipes[t];this.pipes[t]=e}if(t&&t.name){if(e=t,e.processor===this)return e;this.pipes[e.name]=e}return e.processor=this,e},n.prototype.process=function(t,e){var r=t;r.options=this.options();for(var n,i,s=e||t.pipe||"default";s;)"undefined"!=typeof r.nextAfterChildren&&(r.next=r.nextAfterChildren,r.nextAfterChildren=null),"string"==typeof s&&(s=this.pipe(s)),s.process(r),i=r,n=s,s=null,r&&r.next&&(r=r.next,s=i.nextPipe||r.pipe||n);return r.hasResult?r.result:void 0},r.Processor=n},{}]},{},[9])(9)});