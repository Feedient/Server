var EventEmitter = require('events').EventEmitter;
var bunyan = require('bunyan');

var GoodReporter = require('./lib');
var Hoek = require('hoek');

var log = bunyan.createLogger({
    name: 'test'
});

var GoodBunyan = function() {
    var settings ={};
    //settings.bunyanLogger = bunyanLogger;

    GoodReporter.call(this, settings);
    this._settings.bunyanLogger = bunyan.createLogger({
        name: 'test'
    });
};

Hoek.inherits(GoodBunyan, GoodReporter);

GoodBunyan.prototype._report = function(event, eventData) {
    log.info('error');
    console.log(log === this._settings.bunyanLogger);
    this._settings.bunyanLogger.info('error');
};

var reporter = new GoodBunyan(bunyan.createLogger({name:'test'}));
var ee = new EventEmitter();

reporter.start(ee, function(error) {
    log.info('test');
    ee.emit('report', 'request', {statusCode: 200, id: 0, tag: 'test'});
});